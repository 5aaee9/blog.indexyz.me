<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.57.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sharing light, even in death"><title>提取 macOS 上的苹方字体并在 Windows 上安装 - Indexyz Blog</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/spectre.css@0.5.8/dist/spectre.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://blog.indexyz.me/css/syntax.css><link rel=stylesheet href=https://blog.indexyz.me/sass/main.min.bfe6bc4bb48fe5e39fc1dcbd6f38413f8c6c9bfcbb5541281b9be860cf0c3d8b.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css><script src=https://cdn.jsdelivr.net/npm/disqusjs@1.1/dist/disqus.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-97074604-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-97074604-1');</script></head><body><header id=page-header><div class="container grid-lg"><a href=https://blog.indexyz.me/ class=title>Indexyz Blog</a><h2 class=description>Sharing light, even in death</h2><div><nav id=nav-menu role=navigation><a href=/>首页</a>
<a href=/friends/>友链</a></nav></div></div></header><main><div class="container grid-lg"><section id=posts class=post-single><article temscope itemtype=http://schema.org/Article><header><h1 class=post-title itemprop="name headline"><a href=https://blog.indexyz.me/archives/install-pingfang-font-in-windwows/ itemprop=url>提取 macOS 上的苹方字体并在 Windows 上安装</a></h1><div class=post-meta-list><span class=post-meta><span>时间:</span>
<time datetime=2019-05-29T17:49:00&#43;0800>2019-05-29</time></span>
<span class=post-meta><span>分类:</span>
<a href=/categories/windows itemprop=url rel=index><span itemprop=name>Windows</span></a>
&nbsp;</span></span></div></header><div class=post-body itemprop=articleBody><p>目前的 MBP 配置太差了 每次 <code>webpack reload</code> 都要等一会, 所以想使用 Windows 作为开发机. 但是 <code>Lunacy</code> 对没有的字体并不会自动 fallback 到目前的字体上, 然后打开 sketch 的文件都是一个个的大 X. 所以想将 macOS 上的字体提取出来在 Windows 上使用</p><h2 id=开始>开始</h2><p>首先我们需要 Adobe 的 <code>otc2otf</code>, 可以在 <a href=http://blogs.adobe.com/CCJKType/files/2014/01/otc2otf.py>此处</a> 获取. 然后我们需要 <code>PingFang.ttc</code>, 在 Font Book 中找到字体并在 Finder 中打开, 复制出来就好了</p><p>接下来我们需要安装 <a href=https://github.com/fonttools/fonttools>Font Tools</a></p><p>在确保安装了 Brew 的情况下我们可以直接</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>brew install fonttools</code></pre></div><h2 id=转换>转换</h2><p>打开 <code>PingFang.ttc</code> 的文件夹, 运行 otc2otf</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>python2 otc2otf.py -w PingFang.ttc
<span class=ln>2</span>rm -f PSNameUndefined.otf</code></pre></div><p>得到的 <code>otf</code> 文件并不能在 Windows 上使用, 会提示不是一个有效的字体文件</p><p>我们需要使用 <code>Font Tools</code> 进行转换</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln> 1</span><span class=cp>#!/bin/bash
</span><span class=ln> 2</span><span class=cp></span>
<span class=ln> 3</span><span class=k>for</span> item in <span class=sb>`</span>ls *.otf<span class=sb>`</span><span class=p>;</span> <span class=k>do</span>
<span class=ln> 4</span>    <span class=nb>echo</span> <span class=s2>&#34;Editing: &#34;</span><span class=nv>$item</span>
<span class=ln> 5</span>    ttx -t cmap <span class=nv>$item</span>
<span class=ln> 6</span>    <span class=nv>FILENAME</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span><span class=nb>echo</span> <span class=nv>$item</span> <span class=p>|</span> sed <span class=s1>&#39;s/\.[^.]*$//&#39;</span><span class=k>)</span><span class=s2>&#34;</span>
<span class=ln> 7</span>    sed -i <span class=s1>&#39;&#39;</span> <span class=s1>&#39;s/platformID=&#34;0&#34; platEncID=&#34;3&#34;/platformID=&#34;3&#34; platEncID=&#34;1&#34;/g&#39;</span> <span class=nv>$FILENAME</span>.ttx
<span class=ln> 8</span>    sed -i <span class=s1>&#39;&#39;</span> <span class=s1>&#39;s/platformID=&#34;0&#34; platEncID=&#34;4&#34;/platformID=&#34;3&#34; platEncID=&#34;10&#34;/g&#39;</span> <span class=nv>$FILENAME</span>.ttx
<span class=ln> 9</span>    ttx -b -m <span class=nv>$item</span> <span class=nv>$FILENAME</span>.ttx
<span class=ln>10</span><span class=k>done</span></code></pre></div><p>转换完成之后会有 <code>字体名#1.otf</code> 的文件, 这个就能被 Windows 所识别了</p><h2 id=参考文章>参考文章</h2><ul><li><a href=https://medium.com/ujam/trans-pingfang-a-windows-font-d058aebb2550>蘋方移植 – 汚音屋 × UJAM – Medium</a></li><li><a href=https://darknode.in/font/cmap-modify-tutorial/>CMap 表相关修改技术简要指南</a></li></ul></div></article><ul class=pagination><li class="page-item page-prev"><a href=https://blog.indexyz.me/archives/startup-in-j1900/><div class=page-item-subtitle>上一篇</div><div class="page-item-title h5">在星际蜗牛主机上使用 LVM 安装 Arch Linux 以及常用软件</div></a></li><li class="page-item page-next"><a href=https://blog.indexyz.me/archives/starting-using-k3s/><div class=page-item-subtitle>下一篇</div><div class="page-item-title h5">k3s 踩坑</div></a></li></ul><div id=disqus_thread></div><script>new DisqusJS(JSON.parse("{\"api\":\"https://disqus.skk.moe/disqus/\",\"apikey\":\"VtpQwhbhO3YTIYSZdx1N8vOJ6me3une1xSIeXhpuPcE4jurE17UlJozkc9qhvjDw\",\"shortname\":\"indexyz-blog\",\"sitename\":\"Indexyz Blog\"}"))</script></section></div></main><footer class=page-footer><p>Copyright © 2018-2020, Indexyz</p><p>Power by
<a href=https://gohugo.io/>Hugo</a> | Theme
<a href=https://github.com/Indexyz/hugo-theme-index/>Index</a></p></footer></body></html>