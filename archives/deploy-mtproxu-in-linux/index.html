<!doctype html><html lang=en><head><meta name=generator content="Hugo 0.57.2"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sharing light, even in death"><title>在 Linux 机器上部署 MTProxy - Indexyz Blog</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/spectre.css@0.5.8/dist/spectre.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=https://blog.indexyz.me/css/syntax.css><link rel=stylesheet href=https://blog.indexyz.me/sass/main.min.bfe6bc4bb48fe5e39fc1dcbd6f38413f8c6c9bfcbb5541281b9be860cf0c3d8b.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css><script src=https://cdn.jsdelivr.net/npm/disqusjs@1.1/dist/disqus.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-97074604-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-97074604-1');</script></head><body><header id=page-header><div class="container grid-lg"><a href=https://blog.indexyz.me/ class=title>Indexyz Blog</a><h2 class=description>Sharing light, even in death</h2><div><nav id=nav-menu role=navigation><a href=/>首页</a>
<a href=/friends/>友链</a></nav></div></div></header><main><div class="container grid-lg"><section id=posts class=post-single><article temscope itemtype=http://schema.org/Article><header><h1 class=post-title itemprop="name headline"><a href=https://blog.indexyz.me/archives/deploy-mtproxu-in-linux/ itemprop=url>在 Linux 机器上部署 MTProxy</a></h1><div class=post-meta-list><span class=post-meta><span>时间:</span>
<time datetime=2018-10-02T16:36:00&#43;0800>2018-10-02</time></span>
<span class=post-meta><span>分类:</span>
<a href=/categories/linux itemprop=url rel=index><span itemprop=name>Linux</span></a>
&nbsp;</span></span></div></header><div class=post-body itemprop=articleBody><p>MTProxy 是 Telegram 专属的一种代理格式, 目前大部分平台上的 Telegram 客户端都提供了对此协议的支持</p><h2 id=为何要使用-mtproxy>为何要使用 MTProxy</h2><ol><li>方便, MTProxy 可以方便的在各种 Telegram 客户端上部署, 方便使用</li><li>安全, MTProxy 和客户端之间的通信都是经过了 aes256 加密的, 保证了数据安全</li></ol><h2 id=安装>安装</h2><p>MTProxy 有其<a href=https://github.com/TelegramMessenger/MTProxy>官方的实现</a></p><p>不过这个实现比较消耗资源, 编译环境比较难以配置, 于是下文使用</p><p>[card]FreedomPrevails/JSMTProxy[/card]</p><h3 id=安装-node-环境>安装 Node 环境</h3><p>安装 nodejs 环境可以使用 nvm 来快速搭建 使用以下命令安装 nvm 以及最新的 nodejs 以及 pm2 守护</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh <span class=p>|</span> bash
<span class=ln>2</span><span class=nb>export</span> <span class=nv>NVM_DIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>XDG_CONFIG_HOME</span><span class=p>/</span><span class=k>:-</span><span class=nv>$HOME</span><span class=p>/.</span><span class=si>}</span><span class=s2>nvm&#34;</span>
<span class=ln>3</span><span class=o>[</span> -s <span class=s2>&#34;</span><span class=nv>$NVM_DIR</span><span class=s2>/nvm.sh&#34;</span> <span class=o>]</span> <span class=o>&amp;&amp;</span> <span class=se>\.</span> <span class=s2>&#34;</span><span class=nv>$NVM_DIR</span><span class=s2>/nvm.sh&#34;</span> <span class=c1># This loads nvm</span>
<span class=ln>4</span>
<span class=ln>5</span>nvm install <span class=m>10</span>
<span class=ln>6</span>npm i -g pm2
<span class=ln>7</span>pm2 startup</code></pre></div><h3 id=安装-jsmtproxy>安装 JSMTProxy</h3><p>使用以下命令获取随机的 screct</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>head -c <span class=m>16</span> /dev/urandom <span class=p>|</span> xxd -ps</code></pre></div><p>记录这串字符作为你的 token</p><p>使用以下命令来安装后端</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>git clone https://github.com/FreedomPrevails/JSMTProxy.git</code></pre></div><p>编辑 <code>config.json</code> 将端口换为你需要的端口并且修改 screct</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=ln>1</span>pm2 start -n MTProxy mtproxy.js
<span class=ln>2</span>pm2 save</code></pre></div><p>然后现在在 Telegram 上连入 Proxy 就可以了</p></div></article><ul class=pagination><li class="page-item page-prev"><a href=https://blog.indexyz.me/archives/2018-hackergame/><div class=page-item-subtitle>上一篇</div><div class="page-item-title h5">2018 LUG HackerGame 解题笔记</div></a></li><li class="page-item page-next"><a href=https://blog.indexyz.me/archives/soyoustart-arm-to-archlinux/><div class=page-item-subtitle>下一篇</div><div class="page-item-title h5">将 Soyoustart 的 Arm 机器转换为 Arch Linux</div></a></li></ul><div id=disqus_thread></div><script>new DisqusJS(JSON.parse("{\"api\":\"https://disqus.skk.moe/disqus/\",\"apikey\":\"VtpQwhbhO3YTIYSZdx1N8vOJ6me3une1xSIeXhpuPcE4jurE17UlJozkc9qhvjDw\",\"shortname\":\"indexyz-blog\",\"sitename\":\"Indexyz Blog\"}"))</script></section></div></main><footer class=page-footer><p>Copyright © 2018-2020, Indexyz</p><p>Power by
<a href=https://gohugo.io/>Hugo</a> | Theme
<a href=https://github.com/Indexyz/hugo-theme-index/>Index</a></p></footer></body></html>